<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Find a Blood Drive - Blood Donation Support System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <!-- Header Navigation -->
    <header>
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container">
                <a class="navbar-brand" href="index.html">
                    <img src="images/logo.svg" alt="Blood Donation Logo" height="50">
                    <span class="ms-2">Blood Services</span>
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="donate.html">Donate Blood</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="index.html#host">Hosting a Blood Drive</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="index.html#biomedical">Biomedical Services</a>
                        </li>
                    </ul>
                    <div class="ms-3">
                        <a href="login.html" class="btn btn-outline-secondary me-2">Sign In</a>
                        <a href="find-drive.html" class="btn btn-danger active">Find a Blood Drive</a>
                        <button id="languageToggle" class="btn btn-outline-secondary ms-2">
                            <i class="fas fa-globe me-1"></i>
                            <span class="language-text">Tiếng Việt</span>
                        </button>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="bg-danger text-white py-5">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6">
                    <h1 class="display-4 fw-bold">Find a Blood Drive Near You</h1>
                    <p class="fs-5 mt-3">Enter your location to find blood drives in your area. Your donation can help save up to 3 lives.</p>
                    <form id="searchForm" class="mt-4">
                        <div class="row g-2">
                            <div class="col-md-6">
                                <div class="form-floating">
                                    <input type="text" class="form-control" id="zipCode" placeholder="Enter ZIP code">
                                    <label for="zipCode">ZIP Code</label>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-floating">
                                    <select class="form-select" id="radius">
                                        <option value="5">5 miles</option>
                                        <option value="10" selected>10 miles</option>
                                        <option value="25">25 miles</option>
                                        <option value="50">50 miles</option>
                                    </select>
                                    <label for="radius">Radius</label>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <button type="submit" class="btn btn-light h-100 w-100">Search</button>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="col-lg-6 text-center mt-4 mt-lg-0">
                    <img src="images/blood-drive-mobile.jpg" class="img-fluid rounded" alt="Mobile Blood Drive">
                </div>
            </div>
        </div>
    </section>

    <!-- Drive Map Section -->
    <section class="py-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-8">
                    <div class="card shadow-sm mb-4">
                        <div class="card-body p-0">
                            <!-- Map placeholder -->
                            <div id="mapPlaceholder" class="bg-light text-center py-5" style="height: 400px;">
                                <div class="d-flex justify-content-center align-items-center h-100">
                                    <div>
                                        <i class="fas fa-map-marker-alt text-danger fs-1 mb-3"></i>
                                        <h4>Blood Drive Map</h4>
                                        <p class="text-muted">Enter your location to see blood drives on the map</p>
                                    </div>
                                </div>
                            </div>
                            <!-- Actual map will be loaded here -->
                            <div id="map" style="height: 400px; display: none;"></div>
                        </div>
                    </div>
                    
                    <!-- Blood Drive Results -->
                    <div id="searchResults">
                        <h2 class="h4 mb-4">Nearby Blood Drives</h2>
                        
                        <div class="alert alert-info d-flex align-items-center" id="noResultsMessage">
                            <i class="fas fa-info-circle me-3 fs-4"></i>
                            <div>
                                Enter your ZIP code to find blood drives in your area.
                            </div>
                        </div>
                        
                        <div class="blood-drive-results" id="bloodDriveResults" style="display: none;">
                            <!-- Results will be loaded here via JavaScript -->
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-4">
                    <!-- Search Filters -->
                    <div class="card shadow-sm mb-4">
                        <div class="card-header bg-light">
                            <h3 class="h5 mb-0">Filter Results</h3>
                        </div>
                        <div class="card-body">
                            <form id="filterForm">
                                <div class="mb-3">
                                    <label class="form-label">Date Range</label>
                                    <div class="row g-2">
                                        <div class="col-6">
                                            <input type="date" class="form-control" id="startDate">
                                        </div>
                                        <div class="col-6">
                                            <input type="date" class="form-control" id="endDate">
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">Time of Day</label>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="morningFilter" checked>
                                        <label class="form-check-label" for="morningFilter">Morning (8AM-12PM)</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="afternoonFilter" checked>
                                        <label class="form-check-label" for="afternoonFilter">Afternoon (12PM-5PM)</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="eveningFilter" checked>
                                        <label class="form-check-label" for="eveningFilter">Evening (5PM-8PM)</label>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">Location Type</label>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="centerFilter" checked>
                                        <label class="form-check-label" for="centerFilter">Donation Centers</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="mobileFilter" checked>
                                        <label class="form-check-label" for="mobileFilter">Mobile Blood Drives</label>
                                    </div>
                                </div>
                                
                                <div class="d-grid">
                                    <button type="submit" class="btn btn-danger">Apply Filters</button>
                                </div>
                            </form>
                        </div>
                    </div>
                    
                    <!-- Informational Card -->
                    <div class="card shadow-sm border-danger">
                        <div class="card-body">
                            <h4 class="card-title text-danger">Blood Donation Tips</h4>
                            <ul class="list-unstyled">
                                <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i> Drink plenty of water before donating</li>
                                <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i> Eat a healthy meal before your appointment</li>
                                <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i> Bring your ID and donor card if you have one</li>
                                <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i> Wear a shirt with sleeves that can be rolled up</li>
                            </ul>
                            <a href="donate.html" class="btn btn-outline-danger w-100 mt-2">Learn More About Donating</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Featured Drives Section -->
    <section class="py-5 bg-light">
        <div class="container">
            <h2 class="display-6 mb-4">Featured Blood Drives</h2>
            <div class="row">
                <div class="col-md-6 col-lg-4 mb-4">
                    <div class="card h-100 shadow-sm">
                        <div class="card-body">
                            <span class="badge bg-danger mb-2">Urgent Need</span>
                            <h3 class="h5 card-title">Downtown Community Center</h3>
                            <p class="card-text mb-1"><i class="fas fa-map-marker-alt text-danger me-2"></i> 123 Main Street, Downtown</p>
                            <p class="card-text mb-1"><i class="far fa-calendar-alt text-danger me-2"></i> June 15-16, 2023</p>
                            <p class="card-text mb-3"><i class="far fa-clock text-danger me-2"></i> 9:00 AM - 6:00 PM</p>
                            <p class="small text-muted mb-3">Critical need for types O- and B-. All blood types welcome.</p>
                            <div class="d-grid">
                                <button class="btn btn-outline-danger">Schedule Appointment</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6 col-lg-4 mb-4">
                    <div class="card h-100 shadow-sm">
                        <div class="card-body">
                            <span class="badge bg-success mb-2">High Capacity</span>
                            <h3 class="h5 card-title">University Medical Center</h3>
                            <p class="card-text mb-1"><i class="fas fa-map-marker-alt text-danger me-2"></i> 500 University Ave, Midtown</p>
                            <p class="card-text mb-1"><i class="far fa-calendar-alt text-danger me-2"></i> June 18-20, 2023</p>
                            <p class="card-text mb-3"><i class="far fa-clock text-danger me-2"></i> 8:00 AM - 8:00 PM</p>
                            <p class="small text-muted mb-3">Power Red donations available. Free parking for donors.</p>
                            <div class="d-grid">
                                <button class="btn btn-outline-danger">Schedule Appointment</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6 col-lg-4 mb-4">
                    <div class="card h-100 shadow-sm">
                        <div class="card-body">
                            <span class="badge bg-primary mb-2">New Location</span>
                            <h3 class="h5 card-title">Westside Shopping Mall</h3>
                            <p class="card-text mb-1"><i class="fas fa-map-marker-alt text-danger me-2"></i> 789 West Blvd, Westside</p>
                            <p class="card-text mb-1"><i class="far fa-calendar-alt text-danger me-2"></i> June 22, 2023</p>
                            <p class="card-text mb-3"><i class="far fa-clock text-danger me-2"></i> 10:00 AM - 4:00 PM</p>
                            <p class="small text-muted mb-3">Receive a $10 gift card to mall stores. Walk-ins welcome.</p>
                            <div class="d-grid">
                                <button class="btn btn-outline-danger">Schedule Appointment</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="py-5">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-10 col-lg-8">
                    <div class="card bg-danger text-white shadow border-0">
                        <div class="card-body p-5 text-center">
                            <h2 class="mb-3">Host Your Own Blood Drive</h2>
                            <p class="lead mb-4">Make an even bigger impact in your community by hosting a blood drive at your workplace, school, or organization.</p>
                            <div class="row justify-content-center">
                                <div class="col-md-8">
                                    <a href="#" class="btn btn-light btn-lg">Learn About Hosting</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-dark text-white py-4">
        <div class="container">
            <div class="row">
                <div class="col-md-3 mb-4 mb-md-0">
                    <h5>About Us</h5>
                    <ul class="list-unstyled">
                        <li><a href="#" class="text-white-50">Our Mission</a></li>
                        <li><a href="#" class="text-white-50">History</a></li>
                        <li><a href="#" class="text-white-50">Leadership</a></li>
                        <li><a href="#" class="text-white-50">Financials</a></li>
                    </ul>
                </div>
                <div class="col-md-3 mb-4 mb-md-0">
                    <h5>Donate Blood</h5>
                    <ul class="list-unstyled">
                        <li><a href="#" class="text-white-50">Eligibility Requirements</a></li>
                        <li><a href="#" class="text-white-50">Types of Donations</a></li>
                        <li><a href="#" class="text-white-50">What to Expect</a></li>
                        <li><a href="#" class="text-white-50">Find a Drive</a></li>
                    </ul>
                </div>
                <div class="col-md-3 mb-4 mb-md-0">
                    <h5>Host a Drive</h5>
                    <ul class="list-unstyled">
                        <li><a href="#" class="text-white-50">Requirements</a></li>
                        <li><a href="#" class="text-white-50">Benefits</a></li>
                        <li><a href="#" class="text-white-50">Success Stories</a></li>
                        <li><a href="#" class="text-white-50">Apply Now</a></li>
                    </ul>
                </div>
                <div class="col-md-3">
                    <h5>Connect With Us</h5>
                    <div class="mb-2">
                        <a href="#" class="text-white me-2"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="text-white me-2"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="text-white me-2"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="text-white me-2"><i class="fab fa-youtube"></i></a>
                    </div>
                    <p class="small text-white-50">Sign up for our newsletter to stay informed about blood donation news and opportunities.</p>
                    <div class="input-group">
                        <input type="email" class="form-control form-control-sm" placeholder="Your email">
                        <button class="btn btn-danger btn-sm" type="button">Subscribe</button>
                    </div>
                </div>
            </div>
            <hr class="my-4 bg-secondary">
            <div class="row">
                <div class="col-md-6 small text-white-50">
                    &copy; 2023 Blood Donation Support System. All rights reserved.
                </div>
                <div class="col-md-6 text-md-end small">
                    <a href="#" class="text-white-50 me-3">Privacy Policy</a>
                    <a href="#" class="text-white-50 me-3">Terms of Service</a>
                    <a href="#" class="text-white-50">Contact Us</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap & JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/language.js"></script>
    <script>
        // Sample data for blood drives
        window.bloodDrives = [
            {
                id: 1,
                name: "Downtown Community Center",
                address: "123 Main Street, Downtown",
                dates: "June 15-16, 2023",
                times: "9:00 AM - 6:00 PM",
                type: "mobile",
                timeOfDay: ["morning", "afternoon", "evening"],
                urgency: "urgent",
                description: "Critical need for types O- and B-. All blood types welcome."
            },
            {
                id: 2,
                name: "University Medical Center",
                address: "500 University Ave, Midtown",
                dates: "June 18-20, 2023",
                times: "8:00 AM - 8:00 PM",
                type: "center",
                timeOfDay: ["morning", "afternoon", "evening"],
                urgency: "high",
                description: "Power Red donations available. Free parking for donors."
            },
            {
                id: 3,
                name: "Westside Shopping Mall",
                address: "789 West Blvd, Westside",
                dates: "June 22, 2023",
                times: "10:00 AM - 4:00 PM",
                type: "mobile",
                timeOfDay: ["morning", "afternoon"],
                urgency: "normal",
                description: "Receive a $10 gift card to mall stores. Walk-ins welcome."
            },
            {
                id: 4,
                name: "St. Mary's Hospital",
                address: "456 Health Drive, Eastside",
                dates: "June 25-27, 2023",
                times: "7:00 AM - 7:00 PM",
                type: "center",
                timeOfDay: ["morning", "afternoon", "evening"],
                urgency: "high",
                description: "All donations welcome. Platelet donations especially needed."
            },
            {
                id: 5,
                name: "Corporate Office Park",
                address: "1000 Business Lane, North District",
                dates: "June 29, 2023",
                times: "11:00 AM - 3:00 PM",
                type: "mobile",
                timeOfDay: ["afternoon"],
                urgency: "normal",
                description: "Lunch provided for all donors. Appointment preferred."
            }
        ];

        // Handle search form submission
        document.getElementById('searchForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const zipCode = document.getElementById('zipCode').value;
            const radius = document.getElementById('radius').value;
            
            if (zipCode) {
                // Hide placeholder, show map (in a real application)
                document.getElementById('mapPlaceholder').style.display = 'none';
                // document.getElementById('map').style.display = 'block';
                
                // In a real app, you would call an API to get results based on ZIP and radius
                // For demo purposes, we'll just show our sample data
                displaySearchResults(window.bloodDrives);
            } else {
                alert('Please enter a ZIP code to search.');
            }
        });
        
        // Handle filter form submission
        document.getElementById('filterForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Get filter values
            const morning = document.getElementById('morningFilter').checked;
            const afternoon = document.getElementById('afternoonFilter').checked;
            const evening = document.getElementById('eveningFilter').checked;
            const centers = document.getElementById('centerFilter').checked;
            const mobile = document.getElementById('mobileFilter').checked;
            
            // Filter the blood drives
            let filteredDrives = [...window.bloodDrives];
            
            // Filter by time of day
            if (!morning || !afternoon || !evening) {
                const allowedTimes = [];
                if (morning) allowedTimes.push('morning');
                if (afternoon) allowedTimes.push('afternoon');
                if (evening) allowedTimes.push('evening');
                
                filteredDrives = filteredDrives.filter(drive => 
                    drive.timeOfDay.some(time => allowedTimes.includes(time))
                );
            }
            
            // Filter by location type
            if (!centers || !mobile) {
                const allowedTypes = [];
                if (centers) allowedTypes.push('center');
                if (mobile) allowedTypes.push('mobile');
                
                filteredDrives = filteredDrives.filter(drive => 
                    allowedTypes.includes(drive.type)
                );
            }
            
            // Display filtered results
            displaySearchResults(filteredDrives);
        });
        
        // Function to display search results
        window.displaySearchResults = function(drives) {
            const resultsContainer = document.getElementById('bloodDriveResults');
            resultsContainer.style.display = 'block';
            document.getElementById('noResultsMessage').style.display = 'none';
            
            if (drives.length === 0) {
                resultsContainer.innerHTML = '<div class="alert alert-warning">No blood drives found matching your criteria. Try adjusting your filters.</div>';
                return;
            }
            
            let html = '';
            
            drives.forEach(drive => {
                let urgencyBadge = '';
                if (drive.urgency === 'urgent') {
                    urgencyBadge = '<span class="badge bg-danger me-2">Urgent Need</span>';
                } else if (drive.urgency === 'high') {
                    urgencyBadge = '<span class="badge bg-success me-2">High Capacity</span>';
                }
                
                html += `
                <div class="card mb-3 shadow-sm">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-start">
                            <div>
                                <h3 class="h5 mb-1">${drive.name}</h3>
                                <p class="text-muted mb-2">${drive.address}</p>
                            </div>
                            <div>
                                ${urgencyBadge}
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-md-8">
                                <p class="mb-1"><i class="far fa-calendar-alt text-danger me-2"></i> ${drive.dates}</p>
                                <p class="mb-2"><i class="far fa-clock text-danger me-2"></i> ${drive.times}</p>
                                <p class="small text-muted">${drive.description}</p>
                            </div>
                            <div class="col-md-4 text-md-end mt-3 mt-md-0">
                                <button class="btn btn-danger">Schedule</button>
                                <button class="btn btn-outline-secondary ms-2" data-drive-id="${drive.id}">
                                    <i class="fas fa-directions"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                `;
            });
            
            resultsContainer.innerHTML = html;
            
            // Add event listeners to direction buttons
            document.querySelectorAll('[data-drive-id]').forEach(button => {
                button.addEventListener('click', function() {
                    const driveId = this.getAttribute('data-drive-id');
                    // In a real app, you would open a map with directions
                    alert(`Getting directions to blood drive #${driveId}`);
                });
            });
        }
    </script>
</body>
</html> 